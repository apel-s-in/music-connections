=============================================================================
               ТЕХНИЧЕСКОЕ ЗАДАНИЕ: МУЗЫКАЛЬНЫЕ СВЯЗИ PWA
=============================================================================

Сгенерировано: 04 ноября 2024 г.
Автор: apel-s-in
Репозиторий: https://github.com/apel-s-in/music-connections

=============================================================================
1. ОБЗОР ПРОЕКТА И ЦЕЛИ
=============================================================================

Миссия:
Создать интерактивную визуальную энциклопедию, показывающую связи между
скрипачами, их учителями, мастерами инструментов и историческими событиями
через интуитивно понятный интерфейс.

Ключевые принципы:
- Zero-backend архитектура: все данные хранятся в JSON/YAML файлах
- Мобильность first: поддержка всех устройств и ориентаций экрана
- Векторная графика: SVG вместо растровых изображений
- Безопасность: многоуровневая защита админ-панели
- Открытый исходный код: лицензия MIT
- Доступность: соответствие WCAG 2.1 AA
- Мультиязычность: поддержка 8 языков мира

Целевые аудитории:
1. Дети 8-14 лет: игровой подход, анимации, простота
2. Музыканты: точность данных, экспорт в PDF
3. Исследователи: историческая точность, источники
4. Учителя: образовательный контент, сценарии уроков
5. Международные пользователи: поддержка разных языков

=============================================================================
3. СТРУКТУРА ПРОЕКТА
=============================================================================

music-connections/
├── .meta/
│   ├── project-full.txt
│   └── project-adaptive.txt
├── .github/workflows/
│   ├── build.yml
│   ├── backup-to-yandex.yml
│   └── security-audit.yml
├── data/
│   ├── locales/
│   │   ├── en.json
│   │   ├── ru.json
│   │   ├── de.json
│   │   ├── fr.json
│   │   ├── es.json
│   │   ├── zh.json
│   │   ├── ja.json
│   │   └── ar.json
│   ├── people/
│   │   ├── heifetz.yaml
│   │   ├── paganini.yaml
│   │   └── ... (10 персон)
│   └── events/
│       ├── carnegie-1917.yaml
│       └── ... (25 событий)
├── lib/
│   ├── ai-analysis.ts
│   ├── backup-utils.ts
│   ├── date-utils.ts
│   ├── i18n.ts
│   ├── pdf-export.ts
│   ├── security.ts
│   └── telegram.ts
├── public/
│   ├── icons/
│   │   ├── violin.svg
│   │   ├── cello.svg
│   │   └── ...
│   └── manifest.json
├── scripts/
│   ├── build-connections.js
│   ├── generate-context.js
│   └── restore-from-yandex.sh
├── src/
│   ├── app/
│   │   ├── (main)/
│   │   │   ├── layout.tsx
│   │   │   ├── page.tsx
│   │   │   └── timeline/
│   │   │       └── page.tsx
│   │   ├── admin/
│   │   │   ├── layout.tsx
│   │   │   ├── dashboard.tsx
│   │   │   └── ai-recommendations.tsx
│   │   ├── api/
│   │   │   ├── auth/
│   │   │   │   └── route.ts
│   │   │   ├── backup/
│   │   │   │   └── route.ts
│   │   │   └── ai-analysis/
│   │   │       └── route.ts
│   │   └── feedback/
│   │       └── route.ts
│   ├── components/
│   │   ├── ui/
│   │   │   ├── VectorIcons.tsx
│   │   │   ├── ResponsiveContainer.tsx
│   │   │   └── ShapeComponents.tsx
│   │   ├── timeline/
│   │   │   ├── TimelineScale.tsx
│   │   │   └── EventNode.tsx
│   │   ├── graph/
│   │   │   ├── ConnectionGraph.tsx
│   │   │   └── NodeComponent.tsx
│   │   └── admin/
│   │       ├── AIRecommendationsPanel.tsx
│   │       └── DataEditor.tsx
│   └── styles/
│       ├── globals.css
│       └── animations.css
├── .env.example
├── next.config.js
├── postcss.config.js
├── tailwind.config.js
└── package.json

=============================================================================
4. КЛЮЧЕВЫЕ ФУНКЦИИ
=============================================================================

4.1. АДАПТИВНАЯ ВРЕМЕННАЯ ШКАЛА
- Горизонтальная линия с ценой деления 1 день
- Динамический зум: от веков до дней
- Случайные персоны: 5 скрипачей в начальном положении
- Адаптивный дизайн для всех устройств
- Подсветка связей при выборе персоны

4.2. СИСТЕМА СВЯЗЕЙ И ПОДСВЕТКИ
Цветовая кодировка связей:
- Учитель/ученик: #2563eb (синий)
- Концерт: #8b5cf6 (фиолетовый)
- Родственник: #ef4444 (красный)
- Мастер инструментов: #16a34a (зеленый)
- Дружба: #f59e0b (оранжевый)

4.3. МУЛЬТИЯЗЫЧНАЯ ПОДДЕРЖКА
Поддерживаемые языки:
- ru: Русский
- en: Английский
- de: Немецкий
- fr: Французский
- es: Испанский
- zh: Китайский
- ja: Японский
- ar: Арабский (поддержка RTL)

Реализация локализации:
export default getRequestConfig(async ({ locale }) => {
  if (![...locales].includes(locale)) notFound();
  
  return {
    messages: (await import(`../data/locales/${locale}.json`)).default
  };
});

Пример файла локализации (data/locales/ru.json):
{
  "common": {
    "appName": "Музыкальные Связи",
    "search": "Поиск...",
    "loading": "Загрузка...",
    "error": "Ошибка",
    "close": "Закрыть"
  },
  "timeline": {
    "zoomIn": "Приблизить",
    "zoomOut": "Отдалить",
    "randomPeople": "Случайные персоны"
  }
}

4.4. АДМИН-ПАНЕЛЬ С YANDEX GPT
- Аутентификация через GitHub OAuth
- Генерация рекомендаций для добавления новых данных
- Редактор данных с валидацией
- Логирование всех действий

4.5. ОБРАТНАЯ СВЯЗЬ ЧЕРЕЗ TELEGRAM
- Двусторонняя связь с пользователями
- Возможность выбора метода связи (email/telegram)
- Локализация сообщений для разных языков

4.6. ЭКСПОРТ В PDF
- Экспорт жизненных путей скрипачей
- Поддержка различных языков и шрифтов
- Автоматическая пагинация и колонтитулы

4.7. YANDEX.ДОНАТ ИНТЕГРАЦИЯ
- Плавающая кнопка поддержки проекта
- Несколько вариантов сумм пожертвований
- Аналитика пожертвований

4.8. РЕЗЕРВНОЕ КОПИРОВАНИЕ НА ЯНДЕКС.ДИСК
- Автоматическое ежедневное резервное копирование
- Шифрование архивов с паролем
- Политика хранения 7 дней
- Уведомления в Telegram при ошибках

4.9. СИСТЕМА ГЕНЕРАЦИИ КОНТЕКСТА
- Два файла: project-full.txt (полный) и project-adaptive.txt (до 10000 строк)
- Приоритетное включение важных файлов
- Сохранение правильных отступов в коде
- Автоматическое обновление через GitHub Actions

=============================================================================
5. БЕЗОПАСНОСТЬ
=============================================================================

5.1. МНОГОУРОВНЕВАЯ ЗАЩИТА
Уровни защиты:
1. Cloudflare: защита от DDoS, WAF
2. Vercel: middleware аутентификации
3. Next.js: защита API эндпоинтов
4. JWT: валидация токенов для админ-панели
5. Шифрование: защита конфиденциальных данных

5.2. АУТЕНТИФИКАЦИЯ АДМИНА
- GitHub OAuth с белым списком ID пользователей
- JWT токены со сроком действия 7 дней
- Rate limiting: 100 запросов/минуту
- HttpOnly куки для хранения сессий

5.3. ЗАЩИТА ДАННЫХ
- Шифрование резервных копий
- Санация секретов в логах
- Еженедельный аудит безопасности через GitHub Actions
- CSP заголовки для защиты от XSS

6.2. GITHUB ACTIONS
Автоматические workflow:
- auto-sync.yml: генерация контекстных файлов
- backup-to-yandex.yml: резервное копирование
- security-audit.yml: проверка безопасности

=============================================================================
8. ПЛАНЫ НА БУДУЩЕЕ
=============================================================================

8.1. ЗАПЛАНИРОВАННЫЕ ФУНКЦИИ
- Добавление итальянского, португальского и корейского языков
- Мобильное приложение с офлайн-доступом
- Воспроизведение аудиозаписей исторических концертов
- Интерактивные образовательные викторины
- 3D-визуализация конструкции скрипок
- Совместное редактирование для исследователей

8.2. ОПТИМИЗАЦИИ
- Ленивая загрузка данных
- Виртуализированный рендеринг больших графов
- Кеширование на клиенте
- Адаптивная загрузка изображений

8.3. ДОСТУПНОСТЬ
- Полная поддержка скринридеров
- Навигация с клавиатуры
- Режим высокой контрастности
- Настройка размера текста

=============================================================================
9. КОНТАКТЫ И ПОДДЕРЖКА
=============================================================================

9.1. ДЛЯ РАЗРАБОТЧИКОВ
- GitHub Issues: https://github.com/apel-s-in/music-connections/issues
- Telegram: @developer_username

9.2. ДЛЯ ПОЛЬЗОВАТЕЛЕЙ
- Форма обратной связи в приложении
- Email: support@music-connections.app

9.3. УЧАСТИЕ В РАЗРАБОТКЕ
- Pull requests для исправления ошибок и документации
- Обсуждение новых функций в Issues
- Следование стилю кода проекта
- Лицензия MIT

=============================================================================
10. ЗАКЛЮЧЕНИЕ
=============================================================================

Это техническое задание содержит полное описание проекта "Музыкальные Связи".
Система автоматически генерирует контекстные файлы для работы с нейросетями.
Проект готов к разработке и имеет все необходимые компоненты для успеха.

Версия: 3.0
Дата: 04 ноября 2024 г.
